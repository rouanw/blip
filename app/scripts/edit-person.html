<h2>Track your learning</h2>

<form name="edit-person">
  <div class="form-group">
    <label for="name">Your name</label>
    <input type="text" class="form-control" id="name" placeholder="Name"
      ng-model="person.name" required="true" ng-trim="true">
  </div>
  <div ng-repeat="assessment in person.assessments" class="well">
    <h4>Your {{assessment.category}} Ratings</h4>
    <div class="form-group">
      <label for="category{{$index}}">Category name</label>
      <input type="text" class="form-control" id="category{{$index}}"
        placeholder="What are you learning about?"
        ng-model="assessment.category" required="true" ng-trim="true">
    </div>
    <div class="form-group">
      <a href="javascript:void(0)"
          ng-click="showOlderRatings = !showOlderRatings"
          ng-show="assessment.ratings.length > 1">
        {{showOlderRatings ? '- Hide': '+ Show'}} older ratings
      </a>
    </div>
    <div class="form-group" ng-repeat="rating in assessment.ratings"
      ng-show="$index === assessment.ratings.length - 1 || showOlderRatings">
      <label>Rating number {{$index}}</label>
      <table>
        <thead>
        <tr>
          <td>Skill</td>
          <td>Rating</td>
        </tr>
        </thead>
        <tbody>
          <tr ng-repeat="(key, value) in rating">
            <td>
              <p class="form-control-static">{{key}}</p>
            </td>
            <td>
              <input type="number" class="form-control"
                placeholder="1-5" ng-model="rating[key]"
                min="1" max="5">
            </td>
          </tr>
            <td>
              <input type="text" class="form-control"
                placeholder="New skill" ng-model="newRating.key">
            </td>
            <td>
              <input type="number" class="form-control"
                placeholder="1-5" ng-model="newRating.value"
                min="1" max="5">
            </td>
            <td>
              <button ng-click="addSkill(rating, newRating)" class="btn btn-default">Add skill</button>
            </td>
          <tr>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="form-group">
      <button ng-click="addRating(assessment)" class="btn btn-primary">Rate where you are today</button>
    </div>
  </div>

  <div class="form-group">
    <button ng-click="addAssessment(person)" class="btn btn-info">Add a new category of skills to track</button>
  </div>

  <p class="save-all well">
    <button ng-click="save(person)" class="btn btn-success">Save all</button>
    <button ng-click="discardChanges()" class="btn btn-default">Discard changes</button>
  </p>
</form>
